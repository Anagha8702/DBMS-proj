{% extends 'authenticate/base.html' %}
{% block content %}
{% if user.is_authenticated %}
{% load static %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/chart.min.js" integrity="sha512-sW/w8s4RWTdFFSduOTGtk4isV1+190E/GghVffMA9XczdJ2MDzSzLEubKAs5h0wzgSJOQTRYyaz73L3d6RtJSg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<!-- Navbar & Carousel Start -->
    <div class="container-fluid position-relative p-0">
        <nav class="navbar navbar-expand-lg navbar-dark px-5 py-3 py-lg-0">
            <a href="{% url 'home' %}" class="navbar-brand p-0">
                <h1 class="m-0"><i class="fa fa-user-tie me-2"></i>Carz</h1>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                <span class="fa fa-bars"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav ms-auto py-0">
                    <a href="{% url 'home' %}" class="nav-item nav-link active">Home</a>
                  
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Statistics</a>
                        <div class="dropdown-menu m-0">
                            <a href="{% url 'powerbi' %}" class="dropdown-item">Power BI</a>
                            <a href="https://app.powerbi.com/reportEmbed?reportId=f8b37c55-b526-4725-8705-3f4691599edc&autoAuth=true&ctid=26de3d8f-79f7-4642-8217-bbd1e0bb3d8a" target="_blank" class="dropdown-item">Personalize Power BI</a>
                            <a href="{% url 'custom' %}" class="dropdown-item">Custom</a>
                        </div>
                    </div>
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Update</a>
                        <div class="dropdown-menu m-0">
                            <a href="{% url 'add_car' %}" class="dropdown-item">Add Car</a>
                            <a href="{% url 'update' %}" class="dropdown-item">Update Car</a>
                            <a href="{% url 'customer_view' %}" class="dropdown-item">Customer Review</a>
                        </div>
                    </div>
                    <a href="{% url 'edit_profile' %}" class="nav-item nav-link">Profile</a>
					<a href="{% url 'logout' %}" class="nav-item nav-link">Logout</a>
                </div>
              
            </div>
        </nav>

        <div id="header-carousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="w-100" src="{% static 'img/carousel-2.jpg'%}" alt="Image">
                    <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                        <div class="p-3" style="max-width: 900px;">
                            <h5 class="text-white text-uppercase mb-3 animated slideInDown">Business Intelligence for informed decisions</h5>
                            <h1 class="display-1 text-white mb-md-4 animated zoomIn">Car Analytics</h1>
                            <a href="{% url 'powerbi' %}"  class="btn btn-primary py-md-3 px-md-5 me-3 animated slideInLeft">Power BI</a>
                            <a href="{% url 'custom' %}" class="btn btn-outline-light py-md-3 px-md-5 animated slideInRight">Custom</a>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <img class="w-100" src="{% static 'img/car2.jpg'%}" alt="Image">
                    <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                        <div class="p-3" style="max-width: 900px;">
                            <h5 class="text-white text-uppercase mb-3 animated slideInDown">Personalized view to suit your needs</h5>
                            <h1 class="display-1 text-white mb-md-4 animated zoomIn">Custom Dashboards</h1>
                            <a href="{% url 'powerbi' %}" class="btn btn-primary py-md-3 px-md-5 me-3 animated slideInLeft">Power BI</a>
                            <a href="{% url 'home' %}" class="btn btn-outline-light py-md-3 px-md-5 animated slideInRight">Custom</a>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <img class="w-100" src="{% static 'img/car3.jpg'%}" alt="Image">
                    <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                        <div class="p-3" style="max-width: 900px;">
                            <h5 class="text-white text-uppercase mb-3 animated slideInDown">Improve reports via customer feedback</h5>
                            <h1 class="display-1 text-white mb-md-4 animated zoomIn">Customer Feedback</h1>
                            <a href="{% url 'powerbi' %}"  class="btn btn-primary py-md-3 px-md-5 me-3 animated slideInLeft">Power BI</a>
                            <a href="" class="btn btn-outline-light py-md-3 px-md-5 animated slideInRight">Custom</a>
                        </div>
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#header-carousel"
                data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#header-carousel"
                data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
    <!-- Navbar & Carousel End -->
	{% else %}
	<!-- Navbar & Carousel Start -->
    <div class="container-fluid position-relative p-0">
        <nav class="navbar navbar-expand-lg navbar-dark px-5 py-3 py-lg-0">
            <a href="{% url 'home' %}" class="navbar-brand p-0">
                <h1 class="m-0"><i class="fa fa-user-tie me-2"></i>Carz</h1>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                <span class="fa fa-bars"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav ms-auto py-0">
                    <a href="{% url 'home' %}" class="nav-item nav-link active">Home</a>
                    <a href="{% url 'login' %}" class="nav-item nav-link">Login</a>
					<a href="{% url 'register' %}" class="nav-item nav-link">Register</a>
                   
                </div>
              
            </div>
        </nav>
		

        <div id="header-carousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="w-100" src="{% static 'img/carousel-1.jpg'%}" alt="Image">
                    <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                        <div class="p-3" style="max-width: 900px;">
                            <h5 class="text-white text-uppercase mb-3 animated slideInDown">Business Intelligence for informed decisions</h5>
                            <h1 class="display-1 text-white mb-md-4 animated zoomIn">Car Analytics</h1>
                            <a href="{% url 'powerbi' %}"  class="btn btn-primary py-md-3 px-md-5 me-3 animated slideInLeft">Power BI</a>
                            <a href="" class="btn btn-outline-light py-md-3 px-md-5 animated slideInRight">Custom</a>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <img class="w-100" src="{% static 'img/car2.jpg'%}" alt="Image">
                    <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                        <div class="p-3" style="max-width: 900px;">
                            <h5 class="text-white text-uppercase mb-3 animated slideInDown">Personalized view to suit your needs</h5>
                            <h1 class="display-1 text-white mb-md-4 animated zoomIn">Custom Dashboards</h1>
                            <a href="{% url 'powerbi' %}"  class="btn btn-primary py-md-3 px-md-5 me-3 animated slideInLeft">Power BI</a>
                            <a href="" class="btn btn-outline-light py-md-3 px-md-5 animated slideInRight">Custom</a>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <img class="w-100" src="{% static 'img/car3.jpg'%}" alt="Image">
                    <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                        <div class="p-3" style="max-width: 900px;">
                            <h5 class="text-white text-uppercase mb-3 animated slideInDown">Improve reports via customer feedback</h5>
                            <h1 class="display-1 text-white mb-md-4 animated zoomIn">Customer Fedback</h1>
                            <a href="{% url 'powerbi' %}"  class="btn btn-primary py-md-3 px-md-5 me-3 animated slideInLeft">Power BI</a>
                            <a href="" class="btn btn-outline-light py-md-3 px-md-5 animated slideInRight">Custom</a>
                        </div>
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#header-carousel"
                data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#header-carousel"
                data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
    <!-- Navbar & Carousel End -->
{% endif %}
{% if messages %}
<br>
<div class ="container">
    {% for message in messages %}
      <div class="alert alert-danger alart-dismissable" role ="alert" style=" margin-right: 50px;  margin-left: 50px;">
          <button class="btn-close" data-dismiss="alert">
              <small><sup>x</sup></small>
            </button>
          {{ message }}
        </div>
      {% endfor%}
    {% endif %}
{% if form.errors %}
<br>
		      <div class="alert alert-danger alart-dismissable" role ="alert" style=" margin-right: 50px;  margin-left: 50px;">
                <button class="btn-close" data-dismiss="alert">
                    <small><sup>x</sup></small>
                  </button>
               {% for field in form %}
               	{% if field.errors %}
               		{{ field.errors }}
               	{% endif%}
               	{% endfor %}
              </div>
  {% endif %}
{% if error %}
		<div class="alert alert-danger alart-dismissable" role ="alert" style=" margin-right: 50px;  margin-left: 50px;">
                <button class="btn-close" data-dismiss="alert">
                    <small><sup>x</sup></small>
                  </button>
               		{{errormsg}}
                </div>
      {% endif%}

 <!-- Testimonial Start -->
 <div class="container-fluid py-5 wow fadeInUp" data-wow-delay="0.1s">
	<div class="container py-5">
		<div class="section-title text-center position-relative pb-3 mb-4 mx-auto" style="max-width: 600px;">
			<h5 class="fw-bold text-primary text-uppercase">Testimonial</h5>
			<h1 class="mb-0">What Our Clients Say About Our Digital Services</h1>
		</div>
    </div>
</div>

 <!-- Quote Start -->
 <div class="container-fluid py-5 wow fadeInUp" data-wow-delay="0.1s">
	<div class="container py-5">
		<div class="row g-5">
			<div class="col-lg-7">
				<div class="section-title position-relative pb-3 mb-5">
					<h5 class="fw-bold text-primary text-uppercase">Enter CAR ID</h5>
					<h1 class="mb-0">Know what customers feel about the Car</h1>
				</div>
				<div class="row gx-3">
					<div class="col-sm-6 wow zoomIn" data-wow-delay="0.2s">
						<h5 class="mb-4"><i class="fa fa-reply text-primary me-3"></i>Customer Feedback Matters</h5>
					</div>
					<div class="col-sm-6 wow zoomIn" data-wow-delay="0.4s">
						<h5 class="mb-4"><i class="fa fa-phone-alt text-primary me-3"></i>24 hrs telephone support</h5>
					</div>
				</div>
				
				<div class="d-flex align-items-center mt-2 wow zoomIn" data-wow-delay="0.6s">
					<div class="bg-primary d-flex align-items-center justify-content-center rounded" style="width: 60px; height: 60px;">
						<i class="fa fa-phone-alt text-white"></i>
					</div>
					<div class="ps-4">
						<h5 class="mb-2">Call to ask any question</h5>
						<h4 class="text-primary mb-0">+012 345 6789</h4>
					</div>
				</div>
			</div>
			<div class="col-lg-5">
				<div class="bg-primary rounded h-100 d-flex align-items-center p-5 wow zoomIn" data-wow-delay="0.9s">
                  
					<form method="POST" action="{% url 'home' %}">
                        {% csrf_token %}
						<div class="row g-3">
							<div class="col-xl-12">
								<input type="number" class="form-control bg-light border-0"  name = "id" style="height: 55px;" placeholder="Enter Car ID">
							</div>
							<div class="col-12">
								<button class="btn btn-dark w-100 py-3" type="submit">Submit</button>
							</div>
						</div>
					</form>
				</div>
			</div>
            {% if show %}
            <br>
            <div class = "col-md-8 offset-md-2">
            <centre><canvas id="G"></canvas></centre>
            </div>
            {% endif %}
		</div>
	</div>
</div>
<!-- Quote End -->


    <!-- Footer Start -->
    <div class="container-fluid bg-dark text-light mt-5 wow fadeInUp" data-wow-delay="0.1s">
        <div class="container">
            <div class="row gx-5">
                <div class="col-lg-4 col-md-6 footer-about">
                    <div class="d-flex flex-column align-items-center justify-content-center text-center h-100 bg-primary p-4">
                        <a href="index.html" class="navbar-brand">
                            <h1 class="m-0 text-white"><i class="fa fa-user-tie me-2"></i>Carz</h1>
                        </a>
                        <p class="mt-2 mb-4">Welcome to our car data analytics website, where we offer a comprehensive and insightful look into the world of cars through the lens of data analysis. As the automotive industry continues to evolve, the amount of data being generated by cars is increasing at an unprecedented rate. From performance and safety to user experience and environmental impact, data is changing the way we drive, maintain and even design cars. </p>
                       
                    </div>
                </div>
                <div class="col-lg-8 col-md-6">
                    <div class="row gx-5">
                        <div class="col-lg-4 col-md-12 pt-5 mb-5">
                            <div class="section-title section-title-sm position-relative pb-3 mb-4">
                                <h3 class="text-light mb-0">Get In Touch</h3>
                            </div>
                            <div class="d-flex mb-2">
                                <i class="bi bi-geo-alt text-primary me-2"></i>
                                <p class="mb-0">123 Street, New York, USA</p>
                            </div>
                            <div class="d-flex mb-2">
                                <i class="bi bi-envelope-open text-primary me-2"></i>
                                <p class="mb-0">info@example.com</p>
                            </div>
                            <div class="d-flex mb-2">
                                <i class="bi bi-telephone text-primary me-2"></i>
                                <p class="mb-0">+012 345 67890</p>
                            </div>
                            <div class="d-flex mt-4">
                                <a class="btn btn-primary btn-square me-2" href="#"><i class="fab fa-twitter fw-normal"></i></a>
                                <a class="btn btn-primary btn-square me-2" href="#"><i class="fab fa-facebook-f fw-normal"></i></a>
                                <a class="btn btn-primary btn-square me-2" href="#"><i class="fab fa-linkedin-in fw-normal"></i></a>
                                <a class="btn btn-primary btn-square" href="#"><i class="fab fa-instagram fw-normal"></i></a>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-12 pt-0 pt-lg-5 mb-5">
                            <div class="section-title section-title-sm position-relative pb-3 mb-4">
                                <h3 class="text-light mb-0">Quick Links</h3>
                            </div>
                            <div class="link-animated d-flex flex-column justify-content-start">
                                <a class="text-light mb-2" href="#"><i class="bi bi-arrow-right text-primary me-2"></i>Home</a>
                                <a class="text-light mb-2" href="#"><i class="bi bi-arrow-right text-primary me-2"></i>About Us</a>
                                <a class="text-light mb-2" href="#"><i class="bi bi-arrow-right text-primary me-2"></i>Our Services</a>
                                <a class="text-light mb-2" href="#"><i class="bi bi-arrow-right text-primary me-2"></i>Meet The Team</a>
                                <a class="text-light mb-2" href="#"><i class="bi bi-arrow-right text-primary me-2"></i>Latest Blog</a>
                                <a class="text-light" href="#"><i class="bi bi-arrow-right text-primary me-2"></i>Contact Us</a>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-12 pt-0 pt-lg-5 mb-5">
                            <div class="section-title section-title-sm position-relative pb-3 mb-4">
                                <h3 class="text-light mb-0">Popular Links</h3>
                            </div>
                            <div class="link-animated d-flex flex-column justify-content-start">
                                <a class="text-light mb-2" href="#"><i class="bi bi-arrow-right text-primary me-2"></i>Home</a>
                                <a class="text-light mb-2" href="#"><i class="bi bi-arrow-right text-primary me-2"></i>About Us</a>
                                <a class="text-light mb-2" href="#"><i class="bi bi-arrow-right text-primary me-2"></i>Our Services</a>
                                <a class="text-light mb-2" href="#"><i class="bi bi-arrow-right text-primary me-2"></i>Meet The Team</a>
                                <a class="text-light mb-2" href="#"><i class="bi bi-arrow-right text-primary me-2"></i>Latest Blog</a>
                                <a class="text-light" href="#"><i class="bi bi-arrow-right text-primary me-2"></i>Contact Us</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid text-white" style="background: #061429;">
        <div class="container text-center">
            <div class="row justify-content-end">
                <div class="col-lg-8 col-md-6">
                    <div class="d-flex align-items-center justify-content-center" style="height: 75px;">
                        <p class="mb-0">&copy; <a class="text-white border-bottom" href="#">Your Site Name</a>. All Rights Reserved. 
						
						<!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
						Designed by <a class="text-white border-bottom" href="https://htmlcodex.com">HTML Codex</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->

<script>
    const plugin = {
  id: 'custom_canvas_background_color',
  beforeDraw: (chart) => {
    const ctx = chart.canvas.getContext('2d');
    ctx.save();
    ctx.globalCompositeOperation = 'destination-over';
    ctx.fillStyle = '#ADD8E6';
    ctx.fillRect(0, 0, chart.width, chart.height);
    ctx.restore();
  }
};
var l = JSON.parse("{{ review_val }}");
var x = "{{lab}}"
const parser = new DOMParser();

decodedList1 = parser.parseFromString(`<!doctype html><body>${x}`, 'text/html').body.textContent;
const lab1 = JSON.parse(decodedList1);
console.log(lab1)
let canvaselement2=document.getElementById("G").getContext('2d');
      
      var config2 ={
          type: "line",
          data: {
              labels : lab1,
              datasets: [{ data: l,
                label: "{{ cid }}",
              backgroundColor: [
              'rgba(255, 99, 132, 1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)'

                  ],
          }]
          },
          plugins: [plugin],
          options: {
              plugins: {
                  title: {
                      display: true,
                      text: "Customer Satisfaction of Car"
                  },
      
              },
              horizontalLine: [{
            value: 0,
            color: 'black',
            dash: [2],
        width: 2
         }],
             
          }
        };
        var G=new Chart(canvaselement2,config2);
</script>
    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square rounded back-to-top"><i class="bi bi-arrow-up"></i></a>
{% endblock %}